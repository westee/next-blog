---
title: 16.创建Next项目
slug: home
date: 2021/12/16
---

# 创建Next项目

```
npx create-next-app@latest
# or
yarn create next-app
```





# 渲染页面



> git config --global credential.helper cache 
>
> 重新输入github账号密码

## link快速导航

用法：

1.  `<Link herf=xxx><a></a>a></Link>`

优点：

1. 页面不会刷新，用ajax请求新页面
2. 不会重复请求HTML CSS  JS
3. 自动在页面插入新内容/删除就内容
4. 节省了请求解析的时间，速度快

吐槽
1. 借鉴Rails Turbolinks, pjax 等技术

## 同构代码
即代码同时运行在前后端，但是window等api只有前端有，不能使用。

## 全局配置
### 自定义`<Head>`
```jsx
<Head>
    <title>Create Next App</title>
    <meta name="description" content="Generated by create next app" />
    <link rel="icon" href="/favicon.ico" />
</Head>
```
`<React.Fragment></React.Fragment>` 可以简写成`<></>`

#### 修改全局title 和 meta
创建`pages/_app.js`文件
```js
import '../styles/globals.css' // 全局样式
import Head from 'next/head'
function MyApp({ Component, pageProps }) {
  return <>
    <Head>
      <title>我的博客 - sun</title>
    </Head>
    <Component {...pageProps} />
  </>
}

```

1. `MyApp`是每个页面的根组件
2. 页面切换时App不会销毁，App里面的组件会销毁
3. 可用App保存全局状态
4. 全局样式只能在`MyApp`中引入
5. 其他地方只能写局部CSS

### 全局CSS
```jsx
 <style jsx global>{`
      h1 {
      color: red;
      }
 `}</style>
```
### 局部CSS

```jsx
 <style jsx>{`
      h1 {
      color: red;
      }
 `}</style>

```

```jsx
import styles from '../styles/Home.module.css'
<h1 className={styles.title}></h1>
```

> styled Components & styled JSX插件可以语法提示。



## 如何自定义 webpack config

```js
module.exports = {
  reactStrictMode: true,
  webpack: (config, options) => {
    config.module.rules.push({
      test: /\.mdx/,
      use: [
        options.defaultLoaders.babel,
        {
          loader: '@mdx-js/loader',
          options: {
              outputPath: 'static',			// 打包后输出的目录
              publicPath: '_next/static'	// 引用时的前缀目录
          },
        },
      ],
    })

    return config
  },
}

```

`yarn add --dev file-loader`安装loader。

